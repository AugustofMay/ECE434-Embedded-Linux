#!/usr/bin/env python3
import smbus
import time

bus = smbus.SMBus(2)
matrix = 0x70

# The first byte is GREEN, the second is RED
smile = [0x00, 0x3c, 0x00, 0x42, 0x28, 0x89, 0x04, 0x85,
         0x04, 0x85, 0x28, 0x89, 0x00, 0x42, 0x00, 0x3c]

frown = [0x3c, 0x00, 0x42, 0x00, 0x85, 0x20, 0x89, 0x00,
         0x89, 0x00, 0x85, 0x20, 0x42, 0x00, 0x3c, 0x00]

neutral = [0x3c, 0x3c, 0x42, 0x42, 0xa9, 0xa9, 0x89, 0x89,
           0x89, 0x89, 0xa9, 0xa9, 0x42, 0x42, 0x3c, 0x3c]

off = [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
       0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]

# Start oscillator (p10)
bus.write_byte_data(matrix, 0x21, 0)
# Disp on, blink off (p11)
bus.write_byte_data(matrix, 0x81, 0)
# Full brightness (p15)
bus.write_byte_data(matrix, 0xe7, 0)

bus.write_i2c_block_data(matrix, 0, frown)
time.sleep(5)

bus.write_i2c_block_data(matrix, 0, neutral)

for fade in range(0xe0, 0xef, 1):
    bus.write_byte_data(matrix, fade, 0)
    time.sleep(0.5)

bus.write_i2c_block_data(matrix, 0, smile)
time.sleep(5)

bus.write_i2c_block_data(matrix, 0, off)
